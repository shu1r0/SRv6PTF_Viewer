version: '3'
services:
  vue:
    build: ./build/vue
    tty: true
    environment:
      - NODE_ENV=development
    volumes:
    - ../:/usr/src/app
    # command: bash -c "rm -rf node_modules package-lock.json && npm install && npm run build"
    command: bash -c "npm install && npm run build"
  flask:
    build: ./build/flask
    volumes:
    - ../server/:/usr/src/app
    command: bash -c "pip install -r requirements.txt && python3 web_server.py"
    ports:
      - 8080:8080